---
import BaseLayout from "../../layouts/base-layout.astro";
import DemoMenu from "../../components/demo/demo-menu.astro";
import RegistryHeader from "../../../registry/ui/astro/components/header/header.astro";
import ComponentMeta from "../../components/component-meta.astro";
import { readRegistryItem } from "../../lib/registry";

const item = await readRegistryItem('header');
---

<BaseLayout title={`${item.title ?? item.name} | Component`} description={item.description ?? ''}>
  <DemoMenu currentPath={Astro.url.pathname} />
  <main class="max-w-6xl mx-auto p-6">
    <ComponentMeta item={item} />

    <!-- Render header demos -->
    <section class="space-y-6">
      <div class="rounded-xl border bg-card overflow-hidden">
        <div class="border-b px-4 py-3">
          <h2 class="font-semibold">Dropdown mobile menu</h2>
        </div>
        <RegistryHeader
          id="demo-header-dropdown"
          navItems={[{ label: 'Inicio', href: '#inicio' }, { label: 'Productos', href: '#productos' }]}
          logoSrc="/img/logo.svg"
          logoAlt="Demo Logo"
          mobileLogoSrc="/img/logo.svg"
          mobileMenuVariant="dropdown"
          className="relative"
        />
        <div class="p-6 pt-10 text-sm text-muted-foreground">Use <code>mobileMenuVariant="dropdown"</code> for a simple stacked mobile menu.</div>
      </div>

      <div class="rounded-xl border bg-card overflow-hidden">
        <div class="border-b px-4 py-3">
          <h2 class="font-semibold">Drawer mobile menu + language toggle + shrink on scroll</h2>
        </div>
        <RegistryHeader
          id="demo-header-drawer"
          navItems={[{ label: 'Inicio', href: '#inicio' }, { label: 'Contacto', href: '#contacto' }]}
          logoSrc="/img/logo.svg"
          logoAlt="Demo Logo"
          mobileMenuVariant="drawer"
          className="relative"
          langToggle={{ label: 'EN', href: '/' }}
          shrinkOnScroll={true}
          expandedHeightClass="h-[96px]"
          compactHeightClass="h-[68px]"
        />
        <div class="p-6 pt-10 text-sm text-muted-foreground">Use <code>mobileMenuVariant="drawer"</code> for an off-canvas menu.</div>
      </div>
    </section>

    <section class="space-y-4 mt-6">
      <h2 class="text-xl font-semibold">Details</h2>
      <div class="text-sm text-muted-foreground">
        <div><strong>Framework:</strong> {item.meta?.framework ?? 'unknown'}</div>
        {item.dependencies ? <div><strong>Dependencies:</strong> {item.dependencies.join(', ')}</div> : null}
      </div>
    </section>
  </main>
</BaseLayout>
